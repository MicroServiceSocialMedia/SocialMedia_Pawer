<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@100;200;300;400;500;600;700;800;900&display=swap"
          rel="stylesheet">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" />
    <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined" rel="stylesheet"/>
    <link rel="stylesheet"
          href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@48,400,1,0"/>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.3.0/css/all.min.css"
          integrity="sha512-SzlrxWUlpfuzQ+pcUCosxcglQRNAq/DZjVsC0lE40xsADsfeQoEypE+enwcOiGjk/bSuGGKHEyjSoQ1zVisanQ=="
          crossorigin="anonymous" referrerpolicy="no-referrer"/>
    <link rel="stylesheet" href="css/styles.css">
    <title>Home Page</title>
</head>
<body>

<header>
    <h1>
        <img class="header__logo" onclick="homepage()" src="../HtmlPages/images/foot-print.png" alt="">Pawer
    </h1>
    <nav>
        <ul>
            <li><img class="nav__aboutus" src="../HtmlPages/images/high-five.png"><a href="#">About Us</a></li>
            <li><img class="nav__contact" src="../HtmlPages/images/hotline.png"><a href="#">Hire Us</a></li>
        </ul>
    </nav>
</header>

<main>
    <aside>
        <hr class="hr">
        <section class="aside__home">
            <img class="nav__home" onclick="homepage()" src="../HtmlPages/images/home-dark.png" alt="">
            <label>Home</label>
        </section>

        <hr class="hr">
        <section onclick="otherpeople()" class="aside__myposts">
            <span class="material-symbols-outlined listspan">public</span>
            <label>Peoples</label>
        </section>
        <section onclick="mypost()" class="aside__myposts">
            <span class="material-symbols-outlined listspan">list</span>
            <label>My Posts</label>
        </section>

        <section onclick="profile()" class="aside__profile">
            <img src="https://oyster.ignimgs.com/mediawiki/apis.ign.com/avatar-the-last-airbender/b/b0/Aang_img.jpg"
                 alt="">
            <label>Profile</label>
        </section>
        <button onclick="logout()" class="logout">Log Out</button>
    </aside>

    <section class="main__section">

        <div id="follows"></div>
    </section>




    <section class="section__darklight">
            <span onclick="lightdarkmode()" class="material-symbols-outlined" id="dark_mode">
                dark_mode
            </span>
    </section>

</main>


<!-- posts ends-->
<div class="container">
    <div class="pagination-wrapper">
        <svg class="btn btn--prev" height="96" viewBox="0 0 24 24" width="96" xmlns="http://www.w3.org/2000/svg">
            <path d="M15.41 16.09l-4.58-4.59 4.58-4.59L14 5.5l-6 6 6 6z"/>
            <path d="M0-.5h24v24H0z" fill="none"/>
        </svg>

        <div class="pagination-container">
            <div class="little-dot  little-dot--first"></div>
            <div class="little-dot">
                <div class="big-dot-container">
                    <div class="big-dot"></div>
                </div>
            </div>
            <div class="little-dot  little-dot--last"></div>
        </div>

        <svg class="btn btn--next" height="96" viewBox="0 0 24 24" width="96" xmlns="http://www.w3.org/2000/svg">
            <path d="M8.59 16.34l4.58-4.59-4.58-4.59L10 5.75l6 6-6 6z"/>
            <path d="M0-.25h24v24H0z" fill="none"/>
        </svg>
    </div>
</div>
<!-- Feed Ends-->


<script src="../HtmlPages/js/pagination.js"></script>
<script>

    let mode = document.getElementById('dark_mode');
    console.log(mode.textContent)

    function lightdarkmode() {
        document.body.classList.toggle("dark-theme");
        if (document.body.classList.contains("dark-theme")) {
            mode.textContent = 'light_mode';
            mode.id = 'light_mode';
            console.log(mode.textContent)
            console.log(mode.id)
        } else {
            mode.textContent = "dark_mode";
            mode.id = 'dark_mode';
        }

    }
    function profile(){
        window.location.href = 'http://localhost:63342/SocialMedia_Pawer/HtmlPages/profile.html';
    }

    function homepage(){
        window.location.href = 'http://localhost:63342/SocialMedia_Pawer/HtmlPages/index.html';
    }

    function mypost(){
        window.location.href = 'http://localhost:63342/SocialMedia_Pawer/HtmlPages/mypost.html';
    }
    function otherpeople(){
        window.location.href = 'http://localhost:63342/SocialMedia_Pawer/HtmlPages/otherpeople.html';
    }

    function logout(){
        sessionStorage.setItem("token", null);
        window.location.href = 'http://localhost:63342/SocialMedia_Pawer/HtmlPages/login.html';
    }



    window.addEventListener('load', getData);



    function getData() {
        const token = sessionStorage.getItem("token");
        const name = document.getElementById('name');
        const username = document.getElementById('username');
        const id = document.getElementById('id');


        const data = JSON.stringify({
            "name": name,
            "username": username,

            "id": id
        });

        fetch("http://localhost:6260/user/findalluser", {
            method: 'GET',
            headers: {
                "Content-Type": "application/json",
            },
        })
            .then(response => response.json())
            .then(response => { console.log(response)
                for (let index = 0; index < response.length; index++) {
                    document.getElementById("follows").innerHTML += `

<div class="post" >
                    <div class="post__avatar">
                        <img src="https://oyster.ignimgs.com/mediawiki/apis.ign.com/avatar-the-last-airbender/b/b0/Aang_img.jpg"
                            alt="">
                    </div>

                    <div class="post__body" >
                        <div class="post__header">
                            <div class="post__headerText">
                                <h3> <a>${response[index].username}</a>

                                    <span class="post__headerSpecial">
                                    </span>
                                </h3>
                            </div>
                            <div class="post__headerDescription">
                                <p><a>${response[index].name}</a> </p>
                            </div>
                        </div>


                    </div>
                </div>`;
                }

            })
            .catch(error => console.log('error', error));
    }



    function test(event) {
        const value = event.target.getAttribute('value');
        alert(value.value)
    }






    //***************** her sey tamamdır sadece bu metod calismiyor alert harekete geçmiyor.

    function getComment(postIdD) {
        const token = sessionStorage.getItem("token");
        const comment = document.getElementById('comment');
        alert("------------a-a-a-a--aa-a--a-a")


        const data = JSON.stringify({
            "comment": comment
        });

        fetch("http://localhost:6160/post/findallcomment"+"?postId="+postIdD, {
            method: 'GET',
            headers: {
                "Content-Type": "application/json",
            },
        })
            .then(response => response.json())
            .then(response => { console.log(response)
                for (let index = 0; index < response.content.length; index++) {
                    document.getElementById("commentsss").innerHTML += `
                        <div class="commentread">
                            <div class="commentread__avatar">
                                <img src="https://oyster.ignimgs.com/mediawiki/apis.ign.com/avatar-the-last-airbender/b/b0/Aang_img.jpg"
                                    alt="">
                            </div>

                            <div class="commentread__body">
                                <div class="commentread__header">
                                    <div class="commentread__headerText">
                                        <h3>
                                            <span class="commentread__headerSpecial">
                                            </span>
                                        </h3>
                                    </div>
                                    <div class="commentread__headerDescription">
                                        <p>${response.content[index].content}</p>
                                    </div>
                                    <div class="commentread__timer">
                                        <span class="commentread__date"></span>
                                        <span class="commentread__time"></span>
                                    </div>
                                </div>
                            </div>
                        </div>
                `;
                }

            })
            .catch(error => console.log('error', error));
    }



    //*****************
    //--------------------------





    //--------------------------



    //*****************************Paw Tuşu
    function pawPost(){
        let token = sessionStorage.getItem("token");
        const content = document.getElementById('content').value;
        const fileInput = document.getElementById('file');
        const file = fileInput.files[0];

        alert(token)
        alert(content)
        console.log(content)

        const data = {
            "content": content,
            "token": token,
            "image": file
        }

        fetch("http://localhost:6260/user/createpost",{
            method : "POST",
            headers: {
                "Content-Type": "application/json",
            },
            body: JSON.stringify(data)
        })
            .then((response)=>response.json())
            .then((response)=>{
                if (response===true){
                    console.log("Lets go")
                    window.location.href = 'http://localhost:63342/SocialMedia_Pawer/HtmlPages/index.html';
                }
                else{
                    console.log(response.message)
                    alert(response.message)
                }
            })
            .catch((err) => {
                console.log(err)
            });
        console.log(content)

    }



    //*****************************comment Tuşu
    function commentbtn(ids,commentt){
        let token = sessionStorage.getItem("token");
        // const comment = document.getElementById('comment').value;
        let comment= commentt.value;
        const data = {
            "postId" : ids.textContent,
            "comment": comment,
            "token": token
        }
        alert("---> post id-->>> "+ids.textContent)
        alert("tokenn :  "+token)
        alert("commennttt:   "+comment)


        fetch("http://localhost:6260/user/createcommenttopost",{
            method : "POST",
            headers: {
                "Content-Type": "application/json",
            },
            body: JSON.stringify(data)
        })
            .then((response)=>response.json())
            .then((response)=>{
                if (response===true){
                    console.log("Lets go")
                    window.location.href = 'http://localhost:63342/SocialMedia_Pawer/HtmlPages/index.html';
                }
                else{
                    console.log(response.message)
                    alert(response.message)
                }
            })
            .catch((err) => {
                console.log(err)
            });

    }


</script>

</body>
</html>